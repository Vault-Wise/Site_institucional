<!DOCTYPE html>
<html lang="pt-br">

<head>
    <link rel="shortcut icon" href="../assets/icon/index.ico" type="image/x-icon" />
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard | VaultWise</title>

    <link rel="stylesheet" href="../css/dashboard.css" />
    <link rel="stylesheet" href="../css/dashboardNicolas.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />

    <script src="../js/sessao.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
</head>

<body onload="carregar()">
    <div class="pagina">
        <nav>
            <ul id="listaNavegacao">
                <li>
                    <a href="#">
                        <div class="cargoUsuario">
                            <div class="usuario">
                                <img src="../css/imagens/icon12.jpg" alt="">
                                <span id="b_usuario">Usuário</span>
                            </div>
                            <div class="cargo">
                                <span id="cargo_usuario"></span>
                            </div>
                        </div>
                    </a>
                </li>
            </ul>
        </nav>
        <div class="content">
            <div class="conteudo-dash">
                <div class="kpis">
                    <div class="card">
                        <div class="cardParte1">
                            <span class="cardSpan">Agência com menos alertas</span>
                            <span class="cardSpanDestaque">Agência
                                <div id="menos_alerta" class="espacamento">x</div>
                            </span>
                            <div class="info-container">
                                <i class="fa-solid fa-circle-info"></i>
                                <div class="conteudo_info">CEP: xxx Número: xxx</div>
                            </div>
                        </div>
                        <div class="borda"></div>
                        <div class="cardParte2">
                            <span class="cardSpan">Agência com mais alertas</span>
                            <span class="cardSpanDestaque">Agência <div id="maior_alerta" class="espacamento">x</div>
                            </span>
                        </div>
                    </div>
                    <div class="card">
                        <div class="cardParte1">
                            <span class="cardSpan">Tempo de atividade do caixa eletrônico</span>
                        </div>
                        <div class="borda"></div>
                        <div class="cardParte2">
                            <span class="cardSpan">Recomendado</span>
                            <span class="cardSpanDestaque" id="hora_recomendado">4.380 <div class="espacamento">horas
                                </div>
                            </span>
                            <span class="cardSpan">Atual</span>
                            <span class="cardSpanDestaque" id="hora_atual">x <div class="espacamento">horas</div></span>
                        </div>
                    </div>
                </div>

                <div class="graficos">
                    <div class="conteudo-grafico">
                        <div class="grafico">
                            <div class="selects">
                                <select type="text" id="select_componente">
                                    <option value="#" disabled selected>Selecionar componente</option>
                                    <option value="">TeSTE</option>
                                </select>
                                <select type="text" id="select_componente">
                                    <option value="#" disabled selected>Selecionar máquina</option>
                                </select>
                                <button class="check"><i class="fa-solid fa-check"></i></button>
                            </div>
                            <div id="chart"></div>
                        </div>
                        <button class="check" onclick="adicionarGrafico()" id="botaoPlus"><i
                                class="fa-solid fa-plus"></i></button>
                        <div id="bordaGrafico" style="display: none;"></div>
                        <div class="grafico2" style="display: none;" id="grafico2">
                            <div class="selects">
                                <select type="text" id="select_componente">
                                    <option value="#" disabled selected>Selecionar máquina</option>
                                </select>
                                <button class="check" onclick="fecharGrafico()"><i class="fa-solid fa-x"></i></button>
                            </div>
                            <div id="chart2"></div>
                        </div>
                    </div>

                </div>
            </div>

        </div>
    </div>
</body>

</html>

<script>

    function carregar() {

        var options = {
            chart: {
                type: "bar",
            },
            series: [
                {
                    name: "Sales",
                    data: [30, 40, 35, 50, 49, 60, 70, 91, 125],
                },
                {
                    name: "Profits",
                    data: [20, 30, 25, 40, 45, 55, 65, 80, 100],
                },
            ],
            xaxis: {
                categories: [1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999],
            },
        };

        var chart = new ApexCharts(document.querySelector("#chart"), options);
        chart.render();

        var options = {
            chart: {
                type: "bar",
            },
            series: [
                {
                    name: "Sales",
                    data: [30, 40, 35, 50, 49, 60, 70, 91, 125],
                },
                {
                    name: "Profits",
                    data: [20, 30, 25, 40, 45, 55, 65, 80, 100],
                },
            ],
            xaxis: {
                categories: [1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999],
            },
        };

        var chart2 = new ApexCharts(document.querySelector("#chart2"), options);
        chart2.render();
    }

    document.addEventListener("DOMContentLoaded", () => {
        validarSessao()

        const dashPedro = document.getElementById("dashPedro");
        const dashNicolas = document.getElementById("dashNicolas");

        if (dashPedro.classList.contains("agora")) {
            dashPedro.classList.remove("agora");
        }

        if (!dashNicolas.classList.contains("agora")) {
            dashNicolas.classList.add("agora")
        }
    });

    var adicionar = 1;

    function adicionarGrafico() {

        var grafico2 = document.getElementById("grafico2");
        var botaoPlus = document.getElementById("botaoPlus");
        var bordaGrafico = document.getElementById("bordaGrafico");

        if (adicionar == 1) {

            grafico2.style.display = 'flex';
            grafico2.style.opacity = '0';
            grafico2.style.transform = 'scale(0.1)';
            botaoPlus.style.display = 'none';

            bordaGrafico.style.display = 'flex';
            bordaGrafico.style.opacity = '0';
            bordaGrafico.style.transform = 'scale(0.1)';


            setTimeout(() => {
                grafico2.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                grafico2.style.opacity = '1';
                grafico2.style.transform = 'scale(1)';

                bordaGrafico.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                bordaGrafico.style.opacity = '1';
                bordaGrafico.style.transform = 'scale(1)';
            }, 100);

            adicionar = 0;
        }
    }

    function fecharGrafico() {

        var grafico2 = document.getElementById("grafico2");
        var botaoPlus = document.getElementById("botaoPlus");
        var bordaGrafico = document.getElementById("bordaGrafico");

        if (adicionar === 0) {
            grafico2.style.opacity = '0';
            grafico2.style.transform = 'scale(0.9)';

            bordaGrafico.style.opacity = '0';
            bordaGrafico.style.transform = 'scale(0.9)';

            setTimeout(() => {
                grafico2.style.display = 'none';
                botaoPlus.style.display = 'flex';
                bordaGrafico.style.display = 'none';


            }, 500);

            adicionar = 1;
        }

    }
</script>