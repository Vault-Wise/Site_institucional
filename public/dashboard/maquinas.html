<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <link
      rel="shortcut icon"
      href="../assets/icon/index.ico"
      type="image/x-icon"
    />
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard | VaultWise</title>

    <link rel="stylesheet" href="./../css/dashboardMaquinas.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    />

    <script src="../js/sessao.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
  </head>

  <body onload="capturarDados()">
    <div class="container">
      <nav>
        <ul>
          <li><a href="#" class="logo">
                  <img src="./../css/imagens/icon12.jpg">
                  <div class="hello">
                      <span class="nav-item" id="b_usuario">usuário</span>
                  </div>
              </a></li>
          <li><a href="home.html">
                  <i class="fas fa-lightbulb"></i>
                  <span class="nav-item">Home</span>
              </a></li>
          <li><a href="graficos.html">
                  <i class="fas fa-ranking-star"></i>
                  <span class="nav-item">Graficos</span>
              </a></li>
              <li><a href="maquinas.html">
                  <i class="fas fa-solid fa-desktop"></i>
                  <span class="nav-item">Maquinas</span>
              </a></li>
              <li><a href="rede.html">
                  <i class="fas fa-solid fa-globe"></i>
                  <span class="nav-item">Rede</span>
              </a></li>
          <li><a href="#">
              <i class="fas fa-solid fa-gear"></i>
                  <span class="nav-item">Configurações</span>
              </a></li>
          <li><a href="#">
                  <i class="fas fa-question-circle"></i>
                  <span class="nav-item">Ajuda</span>
              </a></li>
          <li><a href="./../index.html" class="logout">
                  <i class="fas fa-sign-out-alt"></i>
                  <span class="nav-item">Sair</span>
              </a></li>
      </ul>
      </nav>
  
      <section class="main">
        <div class="main-cima">
          <h1>Monitoramento de CPU e MEMORIA</h1>
        </div>
        <div class="investimentos">
          <div class="card">
            <i class="fa-solid fa-laptop d"></i>
              <h3>Maquina a ser monitorada</h3>
              <div class="filters">
                <select id="agencia">
                    <option>Agência</option>
                    <option>Agência</option>
                    <option>Agência</option>
                    <option>Agência</option>
                    <!-- Outras opções -->
                </select>
                <select id="situacao">
                    <option>Situação</option>
                    <option>Situação</option>
                    <option>Situação</option>
                    <option>Situação</option>
                    <!-- Outras opções -->
                </select>
            </div>
          </div>
      </div>
        <section class="analise">
          <div class="caixa">
            <ul>
              <li class="texto_caixa">Componentes</li>
            </ul>
            <div class="course">
              <div class="caixa1">
                <h3>Porcentagem de Uso</h3>
                <p>CPU E RAM</p>
                <div id="chart"></div>
              </div>
              <div class="caixa1">
                <h3>Uso RAM</h3>
                <p>Memoria RAM</p>
                <div id="chartCPU"></div>
              </div>
              <div class="caixa1">
                <h3>Uso CPU</h3>
                <p>CPU</p>
                <div id="chartRAM"></div>
              </div>
            </div>
            <div class="metricas"> <br>
              <P>Metricas:</P>
              <P>CPU ou RAM acima de 75%: <span style="color: rgb(122, 29, 29); font-weight: bold;">Perigo!</span></P>
              <P>CPU ou RAM até 70%: <span style="color: rgb(161, 145, 0); font-weight: bold;">Alerta</span></P>
              <P>CPU ou RAM abaixo de 70%: <span style="color: rgb(16, 194, 0); font-weight: bold;">Seguro</span></P>
            </div>
          </div>
        </section>
    </div>
  </body>
</html>

<script>
  b_usuario.innerHTML = sessionStorage.NOME_USUARIO;
  function capturarDados() {
    console.log("Entrando no FETCH");

    fetch(`/graficoDash/mostrarDados`, {
      method: "GET",
    })
      .then(function (resposta) {
        console.log("Estou dentro do then! (FUNFO)")

        var options = {
          chart: {
            type: "line",
          },
          series: [
            {
              name: "CPU",
              data: [30, 55, 30, 40, 80, 25, 70, 5, 70],
            },
            {
              name: "RAM",
              data: [20, 30, 25, 40, 45, 55, 65, 80, 100],
            },
          ],
          xaxis: {
            categories: ["12:15", "12:30", "12:45", "13:00", "13:15", "13:30", "13:45", "14:00", "14:15"],
          },
        };
        
        var chart = new ApexCharts(document.querySelector("#chart"), options);
        chart.render();

        var optionsCPU = {
          chart: {
            type: "bar",
          },
          series: [
            {
              name: "CPU",
              data: [10, 20, 30, 40, 50, 60, 70, 80, 90],
            },
          ],
          xaxis: {
            categories: ["12:15", "12:30", "12:45", "13:00", "13:15", "13:30", "13:45", "14:00", "14:15"],
          },
        };
        
        var chartCPU = new ApexCharts(document.querySelector("#chartCPU"), optionsCPU);
        chartCPU.render();

        var optionsRAM = {
          chart: {
            type: "bar",
          },
          series: [
            {
              name: "RAM",
              data: [20, 30, 25, 40, 45, 55, 65, 80, 100],
            },
          ],
          xaxis: {
            categories: ["12:15", "12:30", "12:45", "13:00", "13:15", "13:30", "13:45", "14:00", "14:15"],
          },
        };
        
        var chartRAM = new ApexCharts(document.querySelector("#chartRAM"), optionsRAM);
        chartRAM.render();
      })
      .catch(function (resposta) {
        console.log(`#ERRO: ${resposta}`);
      });
  }
</script>
