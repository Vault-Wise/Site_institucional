<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <link
      rel="shortcut icon"
      href="../assets/icon/index.ico"
      type="image/x-icon"
    />
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard | VaultWise</title>

    <link rel="stylesheet" href="./../css/dashboards.css" />
    <link rel="stylesheet" href="./../css/dashboardVinicius.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    />

    <script src="../js/sessao.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
  </head>

  <body onload="capturarDados()">
    <div class="container">
      <nav>
        <ul id="listaNavegacao">
          <li>
            <a href="#">
              <div class="cargoUsuario">
                <div class="usuario">
                  <img src="../css/imagens/icon12.jpg" alt="" />
                  <span id="b_usuario">Usuário</span>
                </div>
                <div class="cargo">
                  <span id="cargo_usuario" style="font-size: 15px; margin-top: 10px"></span>
                </div>
              </div>
            </a>
          </li>
        </ul>
      </nav>
      <section class="main">
        <div class="main-cima">
          <h1>Monitoramento de REDE</h1>
        </div>
        <div class="investimentos">
          <div class="card">
            <i class="fa-solid fa-laptop d"></i>
            <h3>Máquina a ser monitorada</h3>
            <div class="filters">
              <select class="agencia-select">
                <option disabled selected>Agências</option>
                <option>Itau</option>
                <option>C6</option>
                <option>Bradesco</option>
              </select>
              <select class="situacao-select">
                <option disabled selected>Situações</option>
                <option>Alerta</option>
                <option>Perigo</option>
                <option>Seguro</option>
              </select>
            </div>
          </div>
        </div>
        <section class="analise">
          <div class="caixa">
            <ul>
              <li class="texto_caixa">Componentes</li>
            </ul>
            <div class="course">
              <div class="caixa1">
                <h3>ACHAR MÊTRICA PARA CPU</h3>
                <p>Rede</p>
                <div id="chart"></div>
              </div>
              <div class="caixa1">
                <h3>Uso de CPU</h3>
                <p>Porcentagem de Uso</p>
                <div id="chartREDE"></div>
              </div>
            </div>
          </div>

          <div class="caixa">
            <div class="filters">
              <select class="agencia-select">
                <option disabled selected>Agências</option>
                <option>Itau</option>
                <option>C6</option>
                <option>Bradesco</option>
              </select>
              <select class="situacao-select">
                <option disabled selected>Situações</option>
                <option>Alerta</option>
                <option>Perigo</option>
                <option>Seguro</option>
              </select>
            </div>
            <table>
              <thead>
                <tr>
                  <th>Agência</th>
                  <th>Máquina</th>
                  <th>Indicador</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Agência A</td>
                  <td>Máquina 1</td>
                  <td>Ativo</td>
                </tr>
                <tr>
                  <td>Agência B</td>
                  <td>Máquina 2</td>
                  <td>Inativo</td>
                </tr>
                <tr>
                  <td>Agência B</td>
                  <td>Máquina 2</td>
                  <td>Inativo</td>
                </tr>
                <tr>
                  <td>Agência B</td>
                  <td>Máquina 2</td>
                  <td>Inativo</td>
                </tr>
                <tr>
                  <td>Agência B</td>
                  <td>Máquina 2</td>
                  <td>Inativo</td>
                </tr>
                <tr>
                  <td>Agência B</td>
                  <td>Máquina 2</td>
                  <td>Inativo</td>
                </tr>

                <!-- Outros registros -->
              </tbody>
            </table>
          </div>
        </section>
      </section>
    </div>

    <script>
      validarSessao();

      document.addEventListener("DOMContentLoaded", () => {
        const dashVini = document.getElementById("dashVini");
        if (!dashVini.classList.contains("agora")) {
          dashVini.classList.add("agora");
        }
        b_usuario.innerHTML = sessionStorage.NOME_USUARIO;
      });

      function capturarDados() {
        fetch("/graficoDash/mostrarDados", {
          method: "GET",
        })
          .then((response) => {
            const options = {
              chart: { type: "line" },
              series: [
                { name: "Enviados", data: [30, 55, 30, 40, 80, 25, 70, 5, 70] },
              ],
              xaxis: {
                categories: [
                  "12:15",
                  "12:30",
                  "12:45",
                  "13:00",
                  "13:15",
                  "13:30",
                  "13:45",
                  "14:00",
                  "14:15",
                ],
              },
            };
            const chart = new ApexCharts(
              document.querySelector("#chart"),
              options
            );
            chart.render();

            const optionsREDE = {
              chart: { type: "line" },
              series: [
                {
                  name: "Porcentagem",
                  data: [50, 4, 10, 30, 100, 25, 70, 5, 70],
                },
              ],
              xaxis: {
                categories: [
                  "12:15",
                  "12:30",
                  "12:45",
                  "13:00",
                  "13:15",
                  "13:30",
                  "13:45",
                  "14:00",
                  "14:15",
                ],
              },
            };
            const chartCPU = new ApexCharts(
              document.querySelector("#chartREDE"),
              optionsREDE
            );
            chartCPU.render();
          })
          .catch((error) =>
            console.log("Nao foi possivel acessar o fetch: ", error)
          );
      }
    </script>
  </body>
</html>
